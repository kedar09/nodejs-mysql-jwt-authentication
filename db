create database TEST;

use TEST;

create table users(
    userId int primary key auto_increment,
    email varchar(30) unique,
    password varchar(250),
    displayName varchar(50),
    phoneNumber bigint
);

create table groupDetails(groupId int primary key auto_increment, groupName varchar(100), userId int, foreign key(userId) REFERENCES users(userId));

ALTER TABLE groupDetails ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, ADD COLUMN updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;

create table groupMembers(groupMemberId int primary key auto_increment, groupId int, userId int, foreign key(groupId) references groupDetails(groupId), foreign key(userId) references users(userId));

create table eventTask(taskId int primary key auto_increment, taskName varchar(200), taskDescription varchar(1000),taskStatus boolean DEFAULT false, userId int, foreign key(userId) references users(userId));

ALTER TABLE eventTask ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, ADD COLUMN updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;


ALTER TABLE eventTask
ADD COLUMN groupId INT,
ADD FOREIGN KEY (groupId) REFERENCES groupDetails(groupId);
